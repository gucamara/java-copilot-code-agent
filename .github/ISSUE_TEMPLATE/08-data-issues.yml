name: üìä Problemas com Dados ou Relat√≥rios
description: Reportar dados incorretos ou problemas com informa√ß√µes exibidas
title: "[DADOS] "
labels: ["bug", "data"]
assignees:
  - copilot
body:
  - type: markdown
    attributes:
      value: |
        ## Problemas com Dados ou Relat√≥rios
        Use este formul√°rio para reportar dados incorretos, incompletos ou inconsistentes no sistema.
        
  - type: dropdown
    id: data-type
    attributes:
      label: Tipo de Dado Afetado
      description: Qual tipo de informa√ß√£o est√° incorreta?
      options:
        - Informa√ß√µes de Atividade (nome, descri√ß√£o, hor√°rio)
        - Lista de Participantes
        - Capacidade/Vagas
        - Hor√°rios e Dias da Semana
        - Informa√ß√µes de Professor
        - Categorias de Atividades
        - Dados de Autentica√ß√£o
        - Outro
    validations:
      required: true

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade Afetada
      description: Qual atividade tem dados incorretos? (se aplic√°vel)
      placeholder: "Ex: Chess Club, Art Club, Programming Class"
    validations:
      required: false

  - type: textarea
    id: incorrect-data
    attributes:
      label: Dados Incorretos/Atuais
      description: Quais dados est√£o errados atualmente?
      placeholder: |
        Ex: 
        - Hor√°rio mostrado: 14:30 - 16:00
        - Capacidade mostrada: 15 vagas
        - Participantes: lista vazia
    validations:
      required: true

  - type: textarea
    id: correct-data
    attributes:
      label: Dados Corretos/Esperados
      description: Quais dados deveriam estar sendo exibidos?
      placeholder: |
        Ex:
        - Hor√°rio correto: 15:30 - 17:00
        - Capacidade correta: 20 vagas
        - Participantes: deveria ter 5 estudantes
    validations:
      required: true

  - type: dropdown
    id: data-source
    attributes:
      label: Onde os Dados Est√£o Incorretos
      description: Onde voc√™ est√° vendo os dados incorretos?
      options:
        - Interface Web (Frontend)
        - Banco de Dados
        - API Response
        - Em m√∫ltiplos lugares
        - N√£o tenho certeza
    validations:
      required: true

  - type: textarea
    id: when-noticed
    attributes:
      label: Quando Foi Notado
      description: Quando voc√™ percebeu este problema? Sempre foi assim ou mudou recentemente?
      placeholder: "Ex: Os dados estavam corretos ontem, mas hoje pela manh√£ j√° estavam errados"
    validations:
      required: false

  - type: dropdown
    id: consistency
    attributes:
      label: Consist√™ncia
      description: Este problema √© consistente ou intermitente?
      options:
        - Sempre mostra dados incorretos
        - √Äs vezes mostra correto, √†s vezes incorreto
        - Dados mudaram uma vez e ficaram errados
    validations:
      required: true

  - type: textarea
    id: impact
    attributes:
      label: Impacto
      description: Como isso est√° afetando o uso do sistema?
      placeholder: "Ex: Professores n√£o conseguem saber quem est√° inscrito, estudantes veem hor√°rios errados"
    validations:
      required: true

  - type: textarea
    id: recent-changes
    attributes:
      label: Mudan√ßas Recentes
      description: Alguma mudan√ßa foi feita recentemente que possa estar relacionada?
      placeholder: "Ex: Foi adicionada uma nova atividade ontem, foi feita altera√ß√£o de hor√°rio"
    validations:
      required: false

  - type: textarea
    id: additional-context
    attributes:
      label: Contexto Adicional
      description: Qualquer outra informa√ß√£o relevante
      placeholder: "Screenshots, exemplos, observa√ß√µes adicionais"
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ### üìã Crit√©rios de Aceita√ß√£o
        
        O problema ser√° considerado resolvido quando:
        - ‚úÖ A fonte dos dados incorretos for identificada
        - ‚úÖ Os dados forem corrigidos para os valores esperados
        - ‚úÖ A corre√ß√£o for persistida no banco de dados
        - ‚úÖ Os dados corretos aparecerem na interface web
        - ‚úÖ Os dados corretos forem retornados pela API
        - ‚úÖ A consist√™ncia dos dados for verificada
        - ‚úÖ Medidas preventivas forem implementadas (se aplic√°vel)
        
        ### üîß Informa√ß√µes T√©cnicas para o Agente Copilot
        
        **Camadas de Dados:**
        1. **Seed Data (Migration)**: `infrastructure/migrations/V001_InitialDatabaseSetup.java`
        2. **Database**: MongoDB - verificar documentos diretamente
        3. **Domain Entities**: Como os dados s√£o modelados (`domain/entities/`)
        4. **DTOs**: Como os dados s√£o transferidos (`application/dtos/`)
        5. **API Response**: O que √© retornado pelos controllers
        6. **Frontend Display**: Como √© renderizado no JavaScript
        
        **Diagn√≥stico Sistem√°tico:**
        ```bash
        # 1. Verificar dados no MongoDB
        # Conectar ao MongoDB e inspecionar documentos
        
        # 2. Verificar migration/seed data
        # Arquivo: V001_InitialDatabaseSetup.java
        
        # 3. Verificar endpoint da API
        # GET /activities ou GET /activities/{name}
        
        # 4. Verificar transforma√ß√£o Entity ‚Üí DTO
        # Arquivo: ActivityMapper.java
        
        # 5. Verificar renderiza√ß√£o no frontend
        # Arquivo: app.js - fun√ß√£o renderActivityCard()
        ```
        
        **Problemas Comuns de Dados:**
        
        1. **Hor√°rios Incorretos**:
           - Verificar `ScheduleDetails` - `startTime` e `endTime` s√£o `LocalTime`
           - Formato correto: `LocalTime.of(15, 30)` para 15:30
        
        2. **Participantes Incorretos**:
           - Verificar lista em `Activity.setParticipants(List.of(...))`
           - Emails devem ser v√°lidos e formato @mergington.edu
        
        3. **Capacidade Incorreta**:
           - Verificar `maxParticipants` no construtor de Activity
           - Deve ser > 0
        
        4. **Tipo/Categoria Incorreta**:
           - Verificar `ActivityType` enum
           - Tipos: SPORTS, ARTS, ACADEMIC, TECHNOLOGY, MUSIC, DRAMA, MANGA, CLUB
        
        5. **Dias da Semana Incorretos**:
           - Verificar `ScheduleDetails` - lista de dias
           - Formato: List.of("Monday", "Wednesday", "Friday")
           - Valores v√°lidos: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday
        
        **Corre√ß√£o de Dados:**
        ```java
        // Localizar e atualizar atividade na migration
        Activity activity = new Activity(
            "Nome Correto",
            "Descri√ß√£o Correta",
            "Hor√°rio leg√≠vel correto",
            new ScheduleDetails(
                List.of("Monday", "Wednesday"),  // Dias corretos
                LocalTime.of(15, 30),            // Hora in√≠cio correta
                LocalTime.of(17, 0)              // Hora fim correta
            ),
            20,  // Capacidade correta
            ActivityType.CORRETO
        );
        activity.setParticipants(List.of(
            "student1@mergington.edu",
            "student2@mergington.edu"
        ));
        mongoTemplate.save(activity);
        ```
        
        **Valida√ß√£o:**
        - Executar aplica√ß√£o e verificar dados via API: GET /activities
        - Verificar interface web
        - Confirmar persist√™ncia reiniciando a aplica√ß√£o
