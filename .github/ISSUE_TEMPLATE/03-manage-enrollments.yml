name: üë• Gerenciar Inscri√ß√µes de Estudantes
description: Adicionar ou remover estudantes de atividades espec√≠ficas
title: "[INSCRI√á√ÉO] Gerenciar estudantes em: "
labels: ["enhancement", "inscri√ß√£o"]
assignees:
  - copilot
body:
  - type: markdown
    attributes:
      value: |
        ## Gerenciar Inscri√ß√µes de Estudantes
        Use este formul√°rio para adicionar ou remover estudantes de atividades extracurriculares.
        
  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade
      description: Em qual atividade voc√™ deseja gerenciar estudantes?
      placeholder: "Ex: Chess Club, Art Club, Programming Class"
    validations:
      required: true

  - type: dropdown
    id: action
    attributes:
      label: A√ß√£o Desejada
      description: O que voc√™ deseja fazer?
      options:
        - Adicionar estudantes
        - Remover estudantes
        - Ambos (adicionar e remover)
    validations:
      required: true

  - type: textarea
    id: students-to-add
    attributes:
      label: Estudantes para Adicionar
      description: Liste os emails dos estudantes que devem ser inscritos (um por linha)
      placeholder: |
        student1@mergington.edu
        student2@mergington.edu
        student3@mergington.edu
    validations:
      required: false

  - type: textarea
    id: students-to-remove
    attributes:
      label: Estudantes para Remover
      description: Liste os emails dos estudantes que devem ser removidos (um por linha)
      placeholder: |
        oldstudent1@mergington.edu
        oldstudent2@mergington.edu
    validations:
      required: false

  - type: textarea
    id: reason
    attributes:
      label: Motivo
      description: Por que essas altera√ß√µes s√£o necess√°rias?
      placeholder: "Ex: Novos estudantes interessados, estudante transferido, conflito de hor√°rio"
    validations:
      required: false

  - type: checkboxes
    id: verify-capacity
    attributes:
      label: Verifica√ß√£o de Capacidade
      description: Confirme que voc√™ verificou a capacidade da atividade
      options:
        - label: Verifiquei que h√° vagas suficientes para os novos estudantes
          required: false

  - type: markdown
    attributes:
      value: |
        ---
        ### üìã Crit√©rios de Aceita√ß√£o
        
        O gerenciamento de inscri√ß√µes ser√° considerado completo quando:
        - ‚úÖ A atividade especificada for localizada no sistema
        - ‚úÖ Todos os estudantes listados para adicionar forem inscritos com sucesso
        - ‚úÖ Todos os estudantes listados para remover forem desincritos
        - ‚úÖ A capacidade m√°xima da atividade n√£o for excedida
        - ‚úÖ Emails inv√°lidos ou duplicados forem tratados adequadamente
        - ‚úÖ As mudan√ßas forem refletidas na interface web
        - ‚úÖ As mudan√ßas forem persistidas no banco de dados
        
        ### üîß Informa√ß√µes T√©cnicas para o Agente Copilot
        
        **Arquivos a modificar:**
        - `src/main/java/com/mergingtonhigh/schoolmanagement/infrastructure/migrations/V001_InitialDatabaseSetup.java` - Atualizar lista de participantes
        
        **Abordagem:**
        1. Localizar a atividade pelo nome no c√≥digo de migration
        2. Para adicionar: adicionar emails √† lista de participantes usando `setParticipants()` ou modificando a lista
        3. Para remover: remover emails da lista de participantes
        4. Validar que a capacidade m√°xima n√£o ser√° excedida
        5. Validar formato dos emails (devem ser @mergington.edu)
        
        **Padr√£o de c√≥digo:**
        ```java
        // Localizar a atividade
        Activity activity = mongoTemplate.findOne(
            Query.query(Criteria.where("name").is("Nome da Atividade")),
            Activity.class
        );
        
        // Obter lista atual e adicionar/remover
        List<String> participants = new ArrayList<>(activity.getParticipants());
        participants.add("novoemail@mergington.edu");
        participants.remove("emailremover@mergington.edu");
        activity.setParticipants(participants);
        
        // Ou definir lista completa diretamente
        activity.setParticipants(List.of(
            "student1@mergington.edu",
            "student2@mergington.edu",
            "student3@mergington.edu"
        ));
        
        mongoTemplate.save(activity);
        ```
        
        **Valida√ß√µes necess√°rias:**
        - Atividade deve existir
        - Emails devem ter formato v√°lido (@mergington.edu)
        - N√∫mero total de participantes n√£o pode exceder `maxParticipants`
        - N√£o permitir emails duplicados
        
        **Nota:** A funcionalidade de inscri√ß√£o/desinscri√ß√£o via API j√° existe nos endpoints:
        - POST `/activities/{activityName}/signup`
        - POST `/activities/{activityName}/unregister`
        
        Esta issue trata de modificar os dados iniciais (seed data) no migration.
