name: üîê Gerenciar Contas de Professores
description: Adicionar, modificar ou remover contas de professores no sistema
title: "[PROFESSOR] "
labels: ["enhancement", "autentica√ß√£o"]
assignees:
  - copilot
body:
  - type: markdown
    attributes:
      value: |
        ## Gerenciar Contas de Professores
        Use este formul√°rio para gerenciar contas de professores e suas permiss√µes.
        
  - type: dropdown
    id: action
    attributes:
      label: A√ß√£o Desejada
      description: O que voc√™ deseja fazer?
      options:
        - Adicionar novo professor
        - Modificar professor existente
        - Remover professor
        - Resetar senha
    validations:
      required: true

  - type: input
    id: username
    attributes:
      label: Username do Professor
      description: Qual √© o username (login) do professor?
      placeholder: "Ex: teacher.silva, teacher.santos, admin"
    validations:
      required: true

  - type: input
    id: full-name
    attributes:
      label: Nome Completo
      description: Nome completo do professor (para nova conta ou modifica√ß√£o)
      placeholder: "Ex: Maria Silva, Jo√£o Santos"
    validations:
      required: false

  - type: input
    id: email
    attributes:
      label: Email do Professor
      description: Email institucional do professor (para nova conta ou modifica√ß√£o)
      placeholder: "Ex: maria.silva@mergington.edu"
    validations:
      required: false

  - type: dropdown
    id: role
    attributes:
      label: Fun√ß√£o/Permiss√£o
      description: Qual o n√≠vel de acesso do professor?
      options:
        - TEACHER (Professor padr√£o)
        - ADMIN (Administrador)
    validations:
      required: false

  - type: input
    id: password
    attributes:
      label: Senha Inicial (apenas para novos professores)
      description: Senha tempor√°ria para o primeiro acesso. Professor dever√° alter√°-la posteriormente.
      placeholder: "Use uma senha tempor√°ria segura"
    validations:
      required: false

  - type: textarea
    id: reason
    attributes:
      label: Motivo da Mudan√ßa
      description: Por que esta altera√ß√£o √© necess√°ria?
      placeholder: "Ex: Novo professor contratado, professor deixou a escola, mudan√ßa de fun√ß√£o"
    validations:
      required: true

  - type: textarea
    id: additional-info
    attributes:
      label: Informa√ß√µes Adicionais
      description: Qualquer outra informa√ß√£o relevante
      placeholder: "Ex: √Åreas de responsabilidade, atividades que o professor gerenciar√°"
    validations:
      required: false

  - type: markdown
    attributes:
      value: |
        ---
        ### üìã Crit√©rios de Aceita√ß√£o
        
        O gerenciamento de conta ser√° considerado completo quando:
        - ‚úÖ Para adi√ß√£o: Nova conta de professor criada com username, nome, email e role corretos
        - ‚úÖ Para adi√ß√£o: Senha criptografada usando Argon2 via BouncyCastle
        - ‚úÖ Para modifica√ß√£o: Dados do professor atualizados conforme solicitado
        - ‚úÖ Para remo√ß√£o: Conta do professor removida do sistema
        - ‚úÖ Para reset de senha: Nova senha criptografada e configurada
        - ‚úÖ O professor consegue fazer login com as credenciais corretas
        - ‚úÖ As mudan√ßas s√£o persistidas no banco de dados MongoDB
        - ‚úÖ Os testes existentes continuam passando
        
        ### üîß Informa√ß√µes T√©cnicas para o Agente Copilot
        
        **Arquivos a modificar:**
        - `src/main/java/com/mergingtonhigh/schoolmanagement/infrastructure/migrations/V001_InitialDatabaseSetup.java` - Gerenciar dados seed de professores
        
        **Padr√£o de c√≥digo para adicionar professor:**
        ```java
        // A senha deve ser obtida de vari√°vel de ambiente ou usar valor padr√£o seguro
        String password = System.getenv("TEACHER_NOME_PASSWORD");
        if (password == null || password.isEmpty()) {
            password = "senha_temporaria_segura_123!";
        }
        
        Teacher teacher = new Teacher(
            "username",
            passwordEncoder.encode(password),
            "Nome Completo",
            "email@mergington.edu",
            Role.TEACHER  // ou Role.ADMIN
        );
        mongoTemplate.save(teacher);
        ```
        
        **Padr√£o de c√≥digo para modificar professor:**
        ```java
        // Buscar professor existente
        Teacher teacher = mongoTemplate.findOne(
            Query.query(Criteria.where("username").is("username_existente")),
            Teacher.class
        );
        
        // Modificar campos necess√°rios
        teacher.setFullName("Novo Nome");
        teacher.setEmail("novoemail@mergington.edu");
        teacher.setRole(Role.ADMIN);
        
        // Se resetar senha
        teacher.setPassword(passwordEncoder.encode("nova_senha"));
        
        mongoTemplate.save(teacher);
        ```
        
        **Padr√£o de c√≥digo para remover professor:**
        ```java
        mongoTemplate.remove(
            Query.query(Criteria.where("username").is("username_para_remover")),
            Teacher.class
        );
        ```
        
        **Valida√ß√µes necess√°rias:**
        - Username deve ser √∫nico
        - Email deve ter formato v√°lido e dom√≠nio @mergington.edu
        - Senha deve ser criptografada usando `passwordEncoder.encode()`
        - Role deve ser TEACHER ou ADMIN
        - Ao remover, verificar se n√£o h√° depend√™ncias cr√≠ticas
        
        **Seguran√ßa:**
        - NUNCA armazenar senhas em texto plano
        - SEMPRE usar `passwordEncoder.encode()` para criptografar senhas
        - Preferir vari√°veis de ambiente para senhas padr√£o
        - Usar senhas tempor√°rias fortes que devem ser alteradas no primeiro login
        
        **Entidade Teacher:**
        - Localizada em: `src/main/java/com/mergingtonhigh/schoolmanagement/domain/entities/Teacher.java`
        - PasswordEncoder configurado em: `src/main/java/com/mergingtonhigh/schoolmanagement/infrastructure/config/SecurityConfig.java`
